import{j as e,c as p}from"./index.DBbjwa8k.js";import{n as g}from"./router.B-sij-_X.js";import{B as u}from"./button.AZqx0Umo.js";import{z as r,u as A,t as S,F as _,a as n,b as l,c as i,d as c,I as w,e as d}from"./zod.CVm1W80w.js";import{u as F}from"./use-toast.Bu7IqXVg.js";import{A as I,I as L,a as y,b as O}from"./alert.DYqv2Hsw.js";import{T as x}from"./textarea.TGBnJs20.js";import{A as R,a as U,b as H,c as P,d as z,e as G,f as M,g as X,h as V}from"./alert-dialog.BGgg8BIq.js";import{P as E,a as C,b as v,C as f}from"./calendar.BXYHFxxU.js";import{c as N}from"./CourseDate.LDpDWJrq.js";import{C as b}from"./calendar.C642oMSj.js";import"./index.lFdC2nkX.js";import"./index.CxOCE76-.js";import"./createLucideIcon.BAPAnDpJ.js";import"./index.BLNbD4pj.js";import"./index.CTnt_JEC.js";import"./index.BatipnVx.js";import"./index.C3TQdI97.js";const $=5,B=400,J=5,k=700,q=5,K=700,Q=700,W=r.object({id:r.string().uuid(),title:r.string().min($).max(B),concepts:r.string().min(J).max(k),level:r.string().min(q).max(K),start:r.date(),end:r.date(),schedules:r.string().max(Q).optional(),userId:r.string().uuid()}).refine(a=>{const t=a.end.getTime()-a.start.getTime();return t>=5184e5&&t<=160704e5},{message:"El curso debe durar mínimo 1 semana y máximo 6 meses.",path:["end"]}),pe=({course:a,mode:h})=>{const{toast:m}=F(),t=A({resolver:S(W),defaultValues:{id:a.id,title:a.title||"",concepts:a.concepts||"",level:a.level||"",start:a.start?new Date(a.start):new Date,end:a.end?new Date(a.end):void 0,schedules:a.schedules||"",userId:a.userId}}),T=async s=>{const j=await(await fetch("/api/courses",{method:"POST",headers:{Accept:"application.json","Content-Type":"application/json"},body:JSON.stringify(s)})).json();j.message==="success"?(m({title:"Curso guardado!",description:h==="CREATE"?"El curso ha sido creado":`El curso "${s.title}" ha sido actualizado`}),g("/")):m({title:"Algo salió mal!",description:j.message,variant:"destructive"})},D=async()=>{const o=await(await fetch("/api/courses",{method:"DELETE",headers:{Accept:"application.json","Content-Type":"application/json"},body:JSON.stringify({courseId:a.id})})).json();o.message==="success"?(m({title:"Curso eliminado",description:`El curso "${a.title}" ha sido eliminado`}),g("/")):m({title:"Algo salió mal!",description:o.message,variant:"destructive"})};return e.jsxs(R,{children:[e.jsxs(I,{className:"bg-blue-50 border-blue-600",children:[e.jsx(L,{className:"h-4 w-4",color:"rgb(37 99 235)"}),e.jsx(y,{className:"text-blue-600",children:e.jsx("strong",{children:"Formulario de Cursos"})}),e.jsx(O,{className:"text-blue-600",children:"Completa los campos de entrada mostrados a continuación para crear un nuevo Curso."})]}),e.jsx("div",{className:"grid gap-4 mt-4",children:e.jsx(_,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(T),className:"grid gap-4",children:[e.jsx("div",{className:"hidden",children:e.jsx(n,{control:t.control,name:"id",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:"Identificador del curso"}),e.jsx(c,{children:e.jsx(w,{placeholder:"Identificador del curso",autoComplete:"id",...s})}),e.jsx(d,{})]})})}),e.jsx(n,{control:t.control,name:"title",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:"¿Cuál es el título del curso o materia?"}),e.jsx(c,{children:e.jsx(x,{placeholder:"Ejm. Razonamiento verbal",className:"resize-none",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"concepts",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:"¿Cuáles son los temas o conceptos más relevantes?"}),e.jsx(c,{children:e.jsx(x,{placeholder:"Ejm. Comprensión de textos argumentativos",className:"resize-none",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"level",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:"¿Cuál es el nivel educativo de tus estudiantes?"}),e.jsx(c,{children:e.jsx(x,{placeholder:"Ejm. 2do Primaria, 5to Secundaria, Universitario, etc.",className:"resize-none",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"start",render:({field:s})=>e.jsxs(l,{className:"flex flex-col",children:[e.jsx(i,{children:"Fecha de inicio"}),e.jsxs(E,{children:[e.jsx(C,{asChild:!0,children:e.jsx(c,{children:e.jsxs(u,{variant:"outline",className:p("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?N.format(s.value):e.jsx("span",{children:"Seleccionar ..."}),e.jsx(b,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(v,{className:"w-auto p-0",align:"start",children:e.jsx(f,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:o=>o<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"end",render:({field:s})=>e.jsxs(l,{className:"flex flex-col",children:[e.jsx(i,{children:"Fecha de finalización"}),e.jsxs(E,{children:[e.jsx(C,{asChild:!0,children:e.jsx(c,{children:e.jsxs(u,{variant:"outline",className:p("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?N.format(s.value):e.jsx("span",{children:"Seleccionar ..."}),e.jsx(b,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(v,{className:"w-auto p-0",align:"start",children:e.jsx(f,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:o=>o<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"schedules",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:"Itinerario del curso"}),e.jsx(c,{children:e.jsx(x,{placeholder:"Ejm. De lunes a viernes, 3 horas cada día",className:"resize-none",...s})}),e.jsx(d,{})]})}),e.jsx(u,{type:"submit",className:"w-full mt-4",children:"Guardar cambios"}),e.jsx(u,{type:"button",variant:"outline",className:"w-full",children:e.jsx("a",{href:"/",children:"Cancelar"})}),h==="UPDATE"&&e.jsx(U,{asChild:!0,children:e.jsx(u,{type:"button",variant:"destructive",className:"w-full",children:"Eliminar curso"})})]})})}),e.jsxs(H,{children:[e.jsxs(P,{children:[e.jsx(z,{children:"¿Está seguro de eliminar el curso?"}),e.jsx(G,{children:"Esta acción no se podrá deshacer. Todos los datos del curso serán eliminados permanentemente de la de base de datos."})]}),e.jsxs(M,{children:[e.jsx(X,{children:"Cancelar"}),e.jsx(V,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:D,children:"Eliminar curso"})]})]})]})};export{pe as CourseForm};
